<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>M√©ta-Moteur Musical - Partitions, Accords et Paroles</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 1em;
      background: #f9f9f9;
      color: #222;
    }
    input, button {
      font-size: 1em;
      padding: 0.7em;
      margin-bottom: 1em;
      width: 100%;
      max-width: 400px;
      box-sizing: border-box;
    }
    button {
      background-color: #3498db;
      color: white;
      border: none;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    button:hover {
      background-color: #2980b9;
    }
    .results {
      max-width: 600px;
      margin-top: 1em;
      background: white;
      border-radius: 8px;
      padding: 1em;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
    }
    h2 {
      margin-top: 0;
    }
    .category {
      margin-bottom: 1em;
    }
    .category h3 {
      border-bottom: 2px solid #3498db;
      padding-bottom: 0.3em;
      margin-bottom: 0.5em;
    }
    a {
      display: block;
      margin: 4px 0;
      color: #2c3e50;
      text-decoration: none;
      word-wrap: break-word;
    }
    a:hover {
      text-decoration: underline;
    }
    .badge {
      font-size: 0.8em;
      margin-left: 0.5em;
      padding: 2px 6px;
      border-radius: 4px;
      vertical-align: middle;
    }
    .free {
      background: #2ecc71;
      color: white;
    }
    .paid {
      background: #e67e22;
      color: white;
    }
    .mixed {
      background: #f1c40f;
      color: #333;
    }
    @media (max-width: 600px) {
      body {
        margin: 0.5em;
      }
      .results {
        max-width: 100%;
        padding: 0.5em;
      }
    }
  </style>
</head>
<body>
  <h1>üéº M√©ta-Moteur Musical</h1>
  <p>Recherchez partitions, accords/tablatures et paroles gratuitement.</p>

  <input type="text" id="inputTitle" placeholder="Exemple : Imagine John Lennon" />
  <button id="btnSearch">üîç Rechercher</button>

  <div id="results" class="results" style="display:none;"></div>

  <script>
    function encodeQueryParam(s) {
      return encodeURIComponent(s.trim());
    }

    const btn = document.getElementById('btnSearch');
    const input = document.getElementById('inputTitle');
    const resultsDiv = document.getElementById('results');

    btn.onclick = () => {
      const title = input.value.trim();
      if (!title) {
        alert('Veuillez saisir un titre.');
        return;
      }

      const cleanTitle = title;

      // Liens pour partitions
      const partitions = [
        { label: "MuseScore", badge: "mixed", url: `https://musescore.com/sheetmusic?text=${encodeQueryParam(cleanTitle)}` },
        { label: "IMSLP (classique, libre)", badge: "free", url: `https://imslp.org/wiki/Special:Search/${encodeQueryParam(cleanTitle)}` },
        { label: "Free-Scores", badge: "free", url: `https://www.free-scores.com/recherche-partitions.php?search=${encodeQueryParam(cleanTitle)}` },
        { label: "SheetMusicPlus (payant)", badge: "paid", url: `https://www.sheetmusicplus.com/search?Ntt=${encodeQueryParam(cleanTitle)}` }
      ];

      // Liens pour accords / tablatures
      const accords = [
        { label: "Ultimate Guitar", badge: "free", url: `https://www.ultimate-guitar.com/search.php?search_type=title&value=${encodeQueryParam(cleanTitle)}` },
        { label: "Chordify", badge: "free", url: `https://chordify.net/search/${encodeQueryParam(cleanTitle)}` },
        { label: "E-Chords", badge: "mixed", url: `https://www.e-chords.com/search/all/${encodeQueryParam(cleanTitle)}` }
      ];

      // Liens pour paroles
      const paroles = [
        { label: "Paroles.net", badge: "free", url: `https://www.paroles.net/recherche?q=${encodeQueryParam(cleanTitle)}` },
        { label: "Genius", badge: "free", url: `https://genius.com/search?q=${encodeQueryParam(cleanTitle)}` },
        { label: "LyricsTranslate (via Google)", badge: "free", url: `https://www.google.com/search?q=site:lyricstranslate.com+${encodeQueryParam(cleanTitle)}` }
      ];

      let html = `<h2>R√©sultats pour : <em>${cleanTitle}</em></h2>`;

      // Partitions (priorit√©)
      html += `<div class="category"><h3>üéº Partitions</h3>`;
      partitions.forEach(link => {
        const badgeClass = link.badge === 'free' ? 'free' : (link.badge === 'paid' ? 'paid' : 'mixed');
        const badgeLabel = link.badge === 'free' ? 'gratuit' : (link.badge === 'paid' ? 'payant' : 'mixte');
        html += `<a href="${link.url}" target="_blank" rel="noopener noreferrer">${link.label}<span class="badge ${badgeClass}">${badgeLabel}</span></a>`;
      });
      html += `</div>`;

      // Accords / tablatures (fallback)
      html += `<div class="category"><h3>üé∏ Accords / Tablatures</h3>`;
      accords.forEach(link => {
        const badgeClass = link.badge === 'free' ? 'free' : (link.badge === 'paid' ? 'paid' : 'mixed');
        const badgeLabel = link.badge === 'free' ? 'gratuit' : (link.badge === 'paid' ? 'payant' : 'mixte');
        html += `<a href="${link.url}" target="_blank" rel="noopener noreferrer">${link.label}<span class="badge ${badgeClass}">${badgeLabel}</span></a>`;
      });
      html += `</div>`;

      // Paroles
      html += `<div class="category"><h3>üìù Paroles</h3>`;
      paroles.forEach(link => {
        const badgeClass = link.badge === 'free' ? 'free' : (link.badge === 'paid' ? 'paid' : 'mixed');
        const badgeLabel = link.badge === 'free' ? 'gratuit' : (link.badge === 'paid' ? 'payant' : 'mixte');
        html += `<a href="${link.url}" target="_blank" rel="noopener noreferrer">${link.label}<span class="badge ${badgeClass}">${badgeLabel}</span></a>`;
      });
      html += `</div>`;

      resultsDiv.innerHTML = html;
      resultsDiv.style.display = 'block';
    };
  </script>
</body>
</html>
